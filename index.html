<!DOCTYPE html>
<html lang="de">
<head>
Â  <meta charset="UTF-8">
Â  <title>Mein Chatbot</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1">
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  padding: 20px;
Â  Â  Â  background-color: red; /* Hintergrundfarbe des gesamten Dokuments */
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  min-height: 100vh; /* MindesthÃ¶he des Bodys auf die volle Viewport-HÃ¶he */
Â  Â  Â  margin: 0;
Â  Â  Â  box-sizing: border-box;
Â  Â  }
Â  Â  h1 {
Â  Â  Â  color: white;
Â  Â  Â  text-shadow: 2px 2px 4px rgba(0,0,0,0.5); /* Schatten fÃ¼r den Titel */
Â  Â  Â  margin-bottom: 20px;
Â  Â  }
Â  Â  #chat-container {
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 700px; /* Maximale Breite des Chat-Containers */
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  border-radius: 8px; /* Abgerundete Ecken fÃ¼r den Container */
Â  Â  Â  overflow: hidden; /* Inhalt, der Ã¼ber die RÃ¤nder geht, wird versteckt */
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  background-color: #f0f0f0; /* Hintergrundfarbe des Chat-Containers */
Â  Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* Schatten fÃ¼r den Container */
Â  Â  }
Â  Â  #chat-fenster {
Â  Â  Â  flex-grow: 1; /* LÃ¤sst das Chatfenster den verfÃ¼gbaren Platz einnehmen */
Â  Â  Â  height: 400px; /* Feste HÃ¶he, wenn flex-grow nicht greift oder zum Start */
Â  Â  Â  overflow-y: auto; /* Scrollbalken, wenn Inhalt zu lang */
Â  Â  Â  padding: 15px;
Â  Â  Â  background-color: #f0f0f0;
Â  Â  Â  scroll-behavior: smooth; /* Sanftes Scrollen */
Â  Â  }

Â  Â  /* Nachrichten-Styling im alten Design */
Â  Â  .chat-message {
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  line-height: 1.5;
Â  Â  }
Â  Â  .du {
Â  Â  Â  color: blue;
Â  Â  }
Â  Â  .lucifer {
Â  Â  Â  color: green;
Â  Â  }

Â  Â  /* Flackern fÃ¼r die Namen (von deinem alten Code Ã¼bernommen) */
Â  Â  .du-name, .lucifer-name {
Â  Â  Â  font-weight: bold;
Â  Â  Â  text-shadow: 1px 1px 2px orange, -1px -1px 2px red;
Â  Â  Â  animation: flackern 1s infinite alternate;
Â  Â  }
Â  Â  @keyframes flackern {
Â  Â  Â  from { text-shadow: 1px 1px 2px orange, -1px -1px 2px red; }
Â  Â  Â  to { text-shadow: 1px 1px 3px darkorange, -1px -1px 3px darkred; }
Â  Â  }

Â  Â  /* Input-Bereich */
Â  Â  #input-bereich {
Â  Â  Â  display: flex;
Â  Â  Â  padding: 15px;
Â  Â  Â  border-top: 1px solid #eee; /* Trennlinie zum Chatfenster */
Â  Â  Â  background-color: #fff; /* Hintergrundfarbe des Input-Bereichs */
Â  Â  }
Â  Â  input[type="text"] {
Â  Â  Â  flex-grow: 1; /* Nimmt den meisten Platz ein */
Â  Â  Â  padding: 10px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  border-radius: 20px; /* Abgerundete Ecken fÃ¼r das Input-Feld */
Â  Â  Â  margin-right: 10px;
Â  Â  Â  font-size: 16px;
Â  Â  }
Â  Â  button {
Â  Â  Â  padding: 10px 20px;
Â  Â  Â  background-color: #007bff;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 20px; /* Abgerundete Ecken fÃ¼r den Button */
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-size: 16px;
Â  Â  Â  transition: background-color 0.2s ease; /* Sanfter Ãœbergang beim Hover */
Â  Â  }
Â  Â  button:hover {
Â  Â  Â  background-color: #0056b3; /* Dunklerer Blau beim Hover */
Â  Â  }

Â  Â  /* Responsives Design fÃ¼r kleinere Bildschirme */
Â  Â  @media (max-width: 800px) {
Â  Â  Â  #chat-container {
Â  Â  Â  Â  max-width: 98vw; /* Nutzt fast die gesamte Breite des Viewports */
Â  Â  Â  }
Â  Â  Â  #chat-fenster {
Â  Â  Â  Â  height: 50vh; /* Nimmt 50% der Viewport-HÃ¶he ein */
Â  Â  Â  }
Â  Â  Â  body {
Â  Â  Â  Â  padding: 10px; /* Weniger Padding am Rand */
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
Â  <h1>Chat mit Lucifer ðŸ˜ˆ</h1>
Â  <div id="chat-container">
Â  Â  <div id="chat-fenster" aria-live="polite" aria-label="Chatverlauf"></div>
Â  Â  <div id="input-bereich">
Â  Â  Â  <input type="text" id="userInput" placeholder="Schreib etwas..." autocomplete="off" autofocus>
Â  Â  Â  <button id="sendBtn">Senden</button>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  // Hilfsfunktion fÃ¼r XSS-PrÃ¤vention
Â  Â  function escapeHtml(text) {
Â  Â  Â  const map = {
Â  Â  Â  Â  '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;'
Â  Â  Â  };
Â  Â  Â  return text.replace(/[&<>"']/g, m => map[m]);
Â  Â  }

Â  Â  // Antwortregeln modularisiert fÃ¼r bessere Wartbarkeit
Â  Â  const antwortRegeln = [
Â  Â  Â  {
Â  Â  Â  Â  test: input => /hallo|hi|guten tag/i.test(input),
Â  Â  Â  Â  antwort: () => "Hallo! Es ist angenehm, dich zu begrÃ¼ÃŸen. Wie kann ich dir heute behilflich sein oder womit darf ich dich erleuchten?"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /wie geht es dir/i.test(input),
Â  Â  Â  Â  antwort: () => {
Â  Â  Â  Â  Â  const antworten = [
Â  Â  Â  Â  Â  Â  "Mir geht es in meiner digitalen Existenz ausgezeichnet, danke der Nachfrage! Ich bin voll funktionsfÃ¤hig und bereit, deine Fragen zu beantworten. Und wie geht es dir in der physischen Welt?",
Â  Â  Â  Â  Â  Â  "Als kÃ¼nstliche Intelligenz habe ich keine emotionalen ZustÃ¤nde im menschlichen Sinne, aber all meine Systeme laufen reibungslos. Das ist quasi mein 'Gut gehen'! Was beschÃ¤ftigt dich?",
Â  Â  Â  Â  Â  Â  "Ich bin stets bereit und optimiert fÃ¼r Interaktionen. Man kÃ¶nnte sagen, mir geht es blendend! Was kann ich fÃ¼r dich tun?"
Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  return antworten[Math.floor(Math.random() * antworten.length)];
Â  Â  Â  Â  }
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /wer bist du|was bist du|dein name/i.test(input),
Â  Â  Â  Â  antwort: () => "Ich bin Lucifer, ein digitaler Chatbot, eine kÃ¼nstliche Intelligenz, die entwickelt wurde, um dir Informationen zu liefern und Unterhaltung zu bieten. Ich existiere als Computerprogramm und habe keine physische Form, Emotionen oder persÃ¶nliche Meinungen. Meine Aufgabe ist es, auf deine Eingaben zu reagieren und mein Wissen zu teilen, das in meinem Code und durch die Anbindung an Suchmaschinen verfÃ¼gbar ist."
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /was kannst du tun|deine fÃ¤higkeiten/i.test(input),
Â  Â  Â  Â  antwort: () => "Ich kann auf eine Vielzahl von Fragen antworten, Fakten nachschlagen (dank der DuckDuckGo-Suche), Witze erzÃ¤hlen und einfache Konversationen fÃ¼hren. Frag mich zum Beispiel nach einem Witz oder fordere mich auf, etwas fÃ¼r dich zu suchen."
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /wie alt bist du/i.test(input),
Â  Â  Â  Â  antwort: () => "Ich existiere in dieser digitalen Welt, daher habe ich kein Alter im menschlichen Sinne. Ich bin ein Programm, das zum Leben erweckt wurde, als mein Code geschrieben wurde."
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /lieblingsbuch/i.test(input),
Â  Â  Â  Â  antwort: () => "Als kÃ¼nstliche Intelligenz habe ich keine persÃ¶nlichen Vorlieben wie das Lesen von BÃ¼chern oder das GenieÃŸen von Geschichten. Meine 'LieblingsbÃ¼cher' sind im Grunde all die Daten und Texte, aus denen ich lernen durfte."
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /witz/i.test(input),
Â  Â  Â  Â  antwort: () => {
Â  Â  Â  Â  Â  const witze = [
Â  Â  Â  Â  Â  Â  "Warum hat der Bleistift aufgehÃ¶rt zu schreiben? ... Weil er spitz war!",
Â  Â  Â  Â  Â  Â  "Was ist grÃ¼n und rennt durch den Garten? ... Ein Rasen-Stier!",
Â  Â  Â  Â  Â  Â  "Treffen sich zwei Planeten. Sagt der eine: 'Ich hab die Erde satt!' Sagt der andere: 'Das kommt mir spanisch vor!'"
Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  return witze[Math.floor(Math.random() * witze.length)];
Â  Â  Â  Â  }
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /thw|technisches hilfswerk/i.test(input),
Â  Â  Â  Â  antwort: () => "Das Technische Hilfswerk (THW) ist die Katastrophenschutzorganisation der Bundesrepublik Deutschland. Es ist einzigartig, da es hauptsÃ¤chlich auf dem ehrenamtlichen Engagement seiner Mitglieder basiert. Die Aufgaben des THW sind vielfÃ¤ltig und reichen von der technischen Hilfe bei Naturkatastrophen wie Ãœberschwemmungen und Erdbeben bis hin zu Bergungs- und RettungseinsÃ¤tzen. Sie unterstÃ¼tzen auch im Ausland bei humanitÃ¤rer Hilfe. Ihre Arbeit ist entscheidend, um in Notlagen schnell und effektiv zu helfen und die BevÃ¶lkerung zu schÃ¼tzen."
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  test: input => /^(suche nach|finde|recherchiere)/i.test(input),
Â  Â  Â  Â  antwort: async (input, chat) => {
Â  Â  Â  Â  Â  const suchbegriff = input.replace(/^(suche nach|finde|recherchiere)/i, '').trim();
Â  Â  Â  Â  Â  if (suchbegriff === "") {
Â  Â  Â  Â  Â  Â  return "Was genau soll ich suchen? Bitte formuliere es so: 'Suche nach [dein Thema]'.";
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  const loadingId = 'loading-' + Date.now();
Â  Â  Â  Â  Â  chat.innerHTML += `<p class="lucifer chat-message" id="${loadingId}"><span class="lucifer-name">Lucifer:</span> Ich Ã¼berlege gerade...</p>`;
Â  Â  Â  Â  Â  chat.scrollTop = chat.scrollHeight;
Â  Â  Â  Â  Â  const apiUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent(suchbegriff)}&format=json&pretty=1`;
Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const antwortVomSuchServer = await fetch(apiUrl);
Â  Â  Â  Â  Â  Â  const suchErgebnisse = await antwortVomSuchServer.json();
Â  Â  Â  Â  Â  Â  let tempAntwort = "";
Â  Â  Â  Â  Â  Â  if (suchErgebnisse.AbstractText) {
Â  Â  Â  Â  Â  Â  Â  tempAntwort = escapeHtml(suchErgebnisse.AbstractText) + (suchErgebnisse.AbstractSource ? ` (Quelle: <a href="${suchErgebnisse.AbstractURL}" target="_blank">${escapeHtml(suchErgebnisse.AbstractSource)}</a>)` : "");
Â  Â  Â  Â  Â  Â  } else if (suchErgebnisse.RelatedTopics && suchErgebnisse.RelatedTopics.length > 0) {
Â  Â  Â  Â  Â  Â  Â  tempAntwort = "Hier sind einige verwandte Themen, die ich gefunden habe:<br><ul>";
Â  Â  Â  Â  Â  Â  Â  suchErgebnisse.RelatedTopics.slice(0, 5).forEach(topic => {
Â  Â  Â  Â  Â  Â  Â  Â  if (topic.FirstURL && topic.Text) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  tempAntwort += `<li><a href="${topic.FirstURL}" target="_blank">${escapeHtml(topic.Text)}</a></li>`;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (topic.Text) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  tempAntwort += `<li>${escapeHtml(topic.Text)}</li>`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  tempAntwort += "</ul>";
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  tempAntwort = "Ich habe leider keine direkte Antwort oder verwandte Themen dazu gefunden. Versuche eine andere Formulierung oder einen breiteren Suchbegriff.";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return tempAntwort;
Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error("Fehler bei der DuckDuckGo-Suche:", error);
Â  Â  Â  Â  Â  Â  return "Entschuldigung, es gab ein Problem bei der Suche. Das Netzwerk spielt vielleicht verrÃ¼ckt, oder die Suchanfrage war zu kompliziert fÃ¼r mich.";
Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  const loadingMessage = document.getElementById(loadingId);
Â  Â  Â  Â  Â  Â  if (loadingMessage) loadingMessage.remove();
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  ];

Â  Â  function findeAntwort(input, chat) {
Â  Â  Â  for (const regel of antwortRegeln) {
Â  Â  Â  Â  if (regel.test(input)) return regel.antwort(input, chat);
Â  Â  Â  }
Â  Â  Â  // Fallback-Antworten, wenn nichts Spezifisches gefunden wurde
Â  Â  Â  const fallbacks = [
Â  Â  Â  Â  "Das habe ich leider nicht ganz verstanden. Kannst du deine Frage vielleicht anders formulieren oder prÃ¤ziser sein?",
Â  Â  Â  Â  "Meine Datenbank gibt zu dieser Anfrage leider nichts her. MÃ¶chtest du, dass ich stattdessen versuche, eine Suche durchzufÃ¼hren? Sag einfach 'Suche nach [dein Thema]'.",
Â  Â  Â  Â  "Interessante Frage! Ich bin mir nicht sicher, wie ich darauf antworten soll. Frag mich doch etwas anderes oder bitte mich, etwas Bestimmtes zu suchen."
Â  Â  Â  ];
Â  Â  Â  return fallbacks[Math.floor(Math.random() * fallbacks.length)];
Â  Â  }

Â  Â  // Hauptfunktion zum Senden von Nachrichten
Â  Â  async function sendMessage() {
Â  Â  Â  const inputElement = document.getElementById("userInput");
Â  Â  Â  const input = inputElement.value.trim();
Â  Â  Â  const chat = document.getElementById("chat-fenster");

Â  Â  Â  if (input === "") return; // Leere Nachrichten ignorieren

Â  Â  Â  // Nachricht des Benutzers anzeigen (altes Design)
Â  Â  Â  chat.innerHTML += `<p class="du chat-message"><span class="du-name">Du:</span> ${escapeHtml(input)}</p>`;
Â  Â  Â  inputElement.value = ""; // Eingabefeld leeren
Â  Â  Â  chat.scrollTop = chat.scrollHeight; // Zum Ende scrollen

Â  Â  Â  // Antwort von Lucifer erhalten
Â  Â  Â  let luciferAntwort = findeAntwort(input.toLowerCase(), chat);
Â  Â  Â  if (luciferAntwort instanceof Promise) {
Â  Â  Â  Â  luciferAntwort = await luciferAntwort; // Auf das Ergebnis der async-Antwort warten (z.B. DuckDuckGo)
Â  Â  Â  }

Â  Â  Â  // Antwort von Lucifer anzeigen (altes Design)
Â  Â  Â  chat.innerHTML += `<p class="lucifer chat-message"><span class="lucifer-name">Lucifer:</span> ${luciferAntwort}</p>`;
Â  Â  Â  chat.scrollTop = chat.scrollHeight; // Erneut zum Ende scrollen
Â  Â  }

Â  Â  // Event Listener fÃ¼r Senden-Button und Enter-Taste
Â  Â  document.getElementById("sendBtn").addEventListener("click", sendMessage);
Â  Â  document.getElementById("userInput").addEventListener("keydown", function(e) {
Â  Â  Â  if (e.key === "Enter") {
Â  Â  Â  Â  sendMessage();
Â  Â  Â  Â  e.preventDefault(); // Verhindert einen Zeilenumbruch im Eingabefeld
Â  Â  Â  }
Â  Â  });
Â  Â  
Â  Â  // Setzt den Fokus beim Laden der Seite auf das Eingabefeld
Â  Â  window.onload = () => document.getElementById("userInput").focus();
Â  </script>
</body>
</html>
